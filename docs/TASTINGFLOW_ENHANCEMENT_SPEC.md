# TastingFlow Enhancement Specification
## Ïª§Ìîº ÌÖåÏù¥Ïä§ÌåÖ ÌîåÎ°úÏö∞ Í∞úÏÑ† ÏÇ¨ÏñëÏÑú

> **‚ö†Ô∏è Mode Separation Notice**: Ïù¥ Î¨∏ÏÑúÏùò ÏùºÎ∂Ä Í≥†Í∏â Í∏∞Îä•Îì§ÏùÄ Lab Mode (Phase 2)Î°ú Î∂ÑÎ•òÎê©ÎãàÎã§.
> MVPÎäî Cafe ModeÏóêÎßå ÏßëÏ§ëÌï©ÎãàÎã§.

### üìã Î™©Ï∞®
1. [Í∞úÏöî](#Í∞úÏöî)
2. [ÏÑ§Í≥Ñ ÏõêÏπô](#ÏÑ§Í≥Ñ-ÏõêÏπô)
3. [ÏÇ¨Ïö©Ïûê Í≤ΩÌóò Î†àÎ≤®](#ÏÇ¨Ïö©Ïûê-Í≤ΩÌóò-Î†àÎ≤®)
4. [Ìñ•ÎØ∏ ÌÉêÏÉâ ÏãúÏä§ÌÖú](#Ìñ•ÎØ∏-ÌÉêÏÉâ-ÏãúÏä§ÌÖú)
5. [ÌîåÎ°úÏö∞ Ïú†Ïó∞ÏÑ±](#ÌîåÎ°úÏö∞-Ïú†Ïó∞ÏÑ±)
6. [Í∞úÏù∏Ìôî Í∏∞Îä•](#Í∞úÏù∏Ìôî-Í∏∞Îä•)
7. [ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ Íµ¨ÌòÑ Í∞ÄÏù¥Îìú](#ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ-Íµ¨ÌòÑ-Í∞ÄÏù¥Îìú)

---

## Í∞úÏöî

### ÌòÑÏû¨ ÏÉÅÌÉú
- 7Îã®Í≥ÑÏùò ÏÑ†ÌòïÏ†Å ÌîåÎ°úÏö∞ (Coffee Info ‚Üí Roaster Notes ‚Üí Flavor ‚Üí Sensory ‚Üí Comment ‚Üí Result)
- Î™®Îì† ÏÇ¨Ïö©ÏûêÏóêÍ≤å ÎèôÏùºÌïú Í≤ΩÌóò Ï†úÍ≥µ
- ÏïÑÏΩîÎîîÏñ∏ Í∏∞Î∞ò Ìñ•ÎØ∏ ÏÑ†ÌÉù UI

### Í∞úÏÑ† Î™©Ìëú
- **Ï£ºÍ¥ÄÏ†Å Í≤ΩÌóò Ï°¥Ï§ë**: Í∞úÏù∏Ïùò ÎèÖÌäπÌïú ÎØ∏Í∞Å Í≤ΩÌóòÏùÑ Í∞ïÏ°∞
- **ÏÑ∏Î∂ÑÌôîÎêú Îã®Í≥Ñ Ïú†ÏßÄ**: Í∞Å Îã®Í≥ÑÏùò Í≥†Ïú†Ìïú Í∞ÄÏπò Î≥¥Ï°¥
- **Ïú†Ïó∞Ìïú ÏßÑÌñâ**: ÌïÑÏàò/ÏÑ†ÌÉù Îã®Í≥Ñ Íµ¨Î∂Ñ Î∞è ÎÇòÏ§ëÏóê Ï∂îÍ∞Ä Í∞ÄÎä•
- **Í∞úÏù∏ÌôîÎêú ÎèÑÍµ¨**: ÏÇ¨Ïö©Ïûê Î†àÎ≤®Ïóê ÎßûÎäî Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï†úÍ≥µ

---

## ÏÑ§Í≥Ñ ÏõêÏπô

### 1. Mindful Tasting (ÎßàÏùåÏ±ôÍπÄ ÌÖåÏù¥Ïä§ÌåÖ)
```
- ÏÜçÎèÑÎ≥¥Îã§ ÌíàÏßà Ï§ëÏãú
- Í∞Å Îã®Í≥ÑÏóêÏÑú Ï∂©Î∂ÑÌïú ÏãúÍ∞Ñ Ï†úÍ≥µ
- "Ï≤úÏ≤úÌûà ÏùåÎØ∏ÌïòÏÑ∏Ïöî" Î©îÏãúÏßÄ Í∞ïÏ°∞
```

### 2. Personal Journey (Í∞úÏù∏Ï†Å Ïó¨Ï†ï)
```
- ÌÉÄÏù∏Ïùò ÌèâÍ∞ÄÎÇò Ïù∏Í∏∞ÎèÑ Î∞∞Ï†ú
- Í∞úÏù∏Ïùò ÎØ∏Í∞Å Î∞úÍ≤¨ Í≥ºÏ†ï ÏßÄÏõê
- ÏûêÏã†ÎßåÏùò Ìñ•ÎØ∏ Ïñ∏Ïñ¥ Íµ¨Ï∂ï
```

### 3. Progressive Disclosure (Ï†êÏßÑÏ†Å Í≥µÍ∞ú)
```
- Ï§ëÍ∏âÏûê ÏàòÏ§ÄÏúºÎ°ú ÌÜµÏùºÎêú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï†úÍ≥µ
- Î™®Îì† ÏÇ¨Ïö©ÏûêÍ∞Ä ÎèôÏùºÌïú Í∏∞Îä• ÏÇ¨Ïö©
- Ï†ÑÎ¨∏Í∞Ä Í∏∞Îä•ÏùÄ Lab Mode (Phase 2)Î°ú Î∂ÑÎ¶¨
```

---

## ÏÇ¨Ïö©Ïûê Í≤ΩÌóò (Ï§ëÍ∏âÏûê ÏàòÏ§Ä ÌÜµÏùº)

### üåø Unified Experience
```typescript
interface UnifiedFeatures {
  // Ï†ÑÏ≤¥ Ìñ•ÎØ∏ Ìú†
  fullFlavorWheel: true,
  maxFlavors: 5,
  
  // ÏÉÅÏÑ∏ Ï°∞Ï†ï
  detailedSensory: {
    body: { min: 1, max: 5, step: 0.5 },
    acidity: { min: 1, max: 5, step: 0.5 },
    sweetness: { min: 1, max: 5, step: 0.5 },
    finish: { min: 1, max: 5, step: 0.5 }
  },
  
  // ÎπÑÍµê Í∏∞Îä•
  comparisons: {
    previousTastings: true,
    averageScores: false  // Í∞úÏù∏ ÌèâÍ∑†Îßå
  },
  
  // Í∞ÄÏù¥Îìú Î©îÏãúÏßÄ
  guides: {
    coffeeInfo: "Ïª§Ìîº Î¥âÌà¨Ïóê Ï†ÅÌûå Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî",
    flavor: "Ï≤òÏùå ÎäêÍª¥ÏßÄÎäî ÎßõÏùÑ ÏÑ†ÌÉùÌï¥Î≥¥ÏÑ∏Ïöî. Ï†ïÎãµÏùÄ ÏóÜÏñ¥Ïöî!",
    sensory: "ÏûÖÏïàÏùò ÎäêÎÇåÏóê ÏßëÏ§ëÌï¥Î≥¥ÏÑ∏Ïöî"
  }
}
```

### üå≥ Expert (Ï†ÑÎ¨∏Í∞Ä) - üî¨ Lab Mode (Phase 2)
> **‚ö†Ô∏è Lab Mode Features - Phase 2ÏóêÏÑú Íµ¨ÌòÑ ÏòàÏ†ï**

```typescript
interface ExpertFeatures {
  // Í≥†Í∏â Í∏∞Îä• (Lab Mode)
  blindMode: true,  // Î°úÏä§ÌÑ∞ ÎÖ∏Ìä∏ Ïà®Í∏∞Í∏∞
  
  // Ï∂îÍ∞Ä ÎÖ∏Ìä∏ ÌïÑÎìú (Lab Mode)
  advancedNotes: {
    extraction: string,
    brewMethod: string,
    waterTemperature: number,
    brewTime: string,
    grindSize: string
  },
  
  // ÏÉÅÏÑ∏ ÎπÑÍµê (Lab Mode)
  detailedComparisons: {
    overlayMode: true,
    historicalTrends: true,
    flavorEvolution: true  // ÏãúÍ∞ÑÏóê Îî∞Î•∏ Îßõ Î≥ÄÌôî
  },
  
  // Ïª§Ïä§ÌÖÄ ÏÜçÏÑ± (Lab Mode)
  customAttributes: true
}
```

---

## Ìñ•ÎØ∏ ÌÉêÏÉâ ÏãúÏä§ÌÖú

### Visual Flavor Wheel (ÏãúÍ∞ÅÏ†Å Ìñ•ÎØ∏ Ìú†)
```typescript
interface FlavorWheelProps {
  userLevel: 'beginner' | 'intermediate' | 'expert';
  selectedFlavors: string[];
  recentFlavors: string[];
  savedFlavors: string[];  // Î∂ÅÎßàÌÅ¨Ìïú Ìñ•ÎØ∏
}

// Íµ¨Ï°∞
FlavorWheel
‚îú‚îÄ‚îÄ Center: ÏÑ†ÌÉùÎêú Ìñ•ÎØ∏ ÌëúÏãú
‚îú‚îÄ‚îÄ Inner Ring: ÎåÄÎ∂ÑÎ•ò (Fruity, Nutty, etc.)
‚îú‚îÄ‚îÄ Middle Ring: Ï§ëÎ∂ÑÎ•ò (Berry, Citrus, etc.)
‚îî‚îÄ‚îÄ Outer Ring: ÏÑ∏Î∂ÑÎ•ò (Blackberry, Lemon, etc.)
```

### Smart Search (Ïä§ÎßàÌä∏ Í≤ÄÏÉâ)
```typescript
interface FlavorSearchProps {
  // Ïã§ÏãúÍ∞Ñ Í≤ÄÏÉâ
  searchQuery: string;
  debounceDelay: 300;  // Í≤ÄÏÉâ ÎîîÎ∞îÏö¥Ïä§ ÏßÄÏó∞
  
  // ÏûêÎèôÏôÑÏÑ±
  autoComplete: {
    recentlyUsed: string[],
    contextual: string[],  // Í∞ôÏùÄ origin/processÏùò Ïª§ÌîºÏóêÏÑú Î∞úÍ≤¨Îêú Ìñ•ÎØ∏
    phonetic: boolean      // Î∞úÏùå Í∏∞Î∞ò Í≤ÄÏÉâ (Ïòà: "Î≤†Î¶¨" ‚Üí "Berry")
  },
  
  // Í≤ÄÏÉâ Í≤∞Í≥º ÌïòÏù¥ÎùºÏù¥ÌåÖ
  highlighting: {
    enabled: true,
    highlightColor: '#FFE082'
  },
  
  // Ìñ•ÎØ∏ ÏÑ§Î™Ö
  flavorDescriptions: {
    onHover: boolean,
    examples: string[]     // "Blackberry: ÏßÑÌïú Î≥¥ÎùºÏÉâ Î≤†Î¶¨Ïùò Îã¨ÏΩ§ÌïòÍ≥† ÏïΩÍ∞Ñ Ïã†Îßõ"
  }
}
```

### Personal Flavor Library (Í∞úÏù∏ Ìñ•ÎØ∏ ÎùºÏù¥Î∏åÎü¨Î¶¨)
```typescript
interface PersonalFlavorLibrary {
  // Ìñ•ÎØ∏ Î∂ÅÎßàÌÅ¨
  bookmarkedFlavors: {
    flavor: string,
    count: number,
    lastUsed: Date,
    notes?: string
  }[],
  
  // Ìñ•ÎØ∏ Ïó∞Í≤∞
  flavorConnections: {
    [flavor: string]: string[]  // Ìï®Íªò ÏÑ†ÌÉùÎêú Ìñ•ÎØ∏Îì§
  },
  
  // Í∞úÏù∏ Ìñ•ÎØ∏ ÎÖ∏Ìä∏
  personalDescriptions: {
    [flavor: string]: string    // ÎÇòÎßåÏùò ÏÑ§Î™Ö
  }
}
```

---

## ÌîåÎ°úÏö∞ Ïú†Ïó∞ÏÑ±

### Required vs Optional Steps
```typescript
enum StepStatus {
  REQUIRED = 'required',
  OPTIONAL = 'optional',
  SKIPPED = 'skipped',
  COMPLETED = 'completed',
  INCOMPLETE = 'incomplete'
}

interface TastingStep {
  id: string;
  name: string;
  status: StepStatus;
  canRevisit: boolean;
  data?: any;
}

const TASTING_STEPS: TastingStep[] = [
  { id: 'coffee-info', name: 'Coffee Info', status: StepStatus.REQUIRED },
  { id: 'flavors', name: 'Flavor Selection', status: StepStatus.REQUIRED },
  { id: 'sensory', name: 'Sensory Evaluation', status: StepStatus.REQUIRED },
  { id: 'personal-note', name: 'Personal Note', status: StepStatus.OPTIONAL },
  { id: 'roaster-notes', name: 'Roaster Notes', status: StepStatus.OPTIONAL },
  { id: 'result', name: 'Result', status: StepStatus.REQUIRED }
];
```

### Late Addition (ÎÇòÏ§ëÏóê Ï∂îÍ∞ÄÌïòÍ∏∞)
```typescript
interface LateAdditionFeature {
  // Í≤∞Í≥º ÌôîÎ©¥ÏóêÏÑú Ï∂îÍ∞Ä Í∞ÄÎä•Ìïú Ìï≠Î™©Îì§
  editableAfterSave: {
    flavors: true,
    sensory: true,
    personalNote: true,
    photos: true
  },
  
  // ÏïåÎ¶º
  reminders: {
    afterHours: 24,
    message: "Ïñ¥Ï†ú ÎßàÏã† Ïª§ÌîºÏùò Ìñ•ÎØ∏Î•º Îçî Ï∂îÍ∞ÄÌï¥Î≥¥ÏãúÍ≤†Ïñ¥Ïöî?"
  }
}
```

---

## Í∞úÏù∏Ìôî Í∏∞Îä•

### Contextual History (Îß•ÎùΩÏ†Å ÌûàÏä§ÌÜ†Î¶¨)
```typescript
interface TastingContext {
  // ÎπÑÍµê Í∞ÄÎä•Ìïú Ïù¥Ï†Ñ Í∏∞Î°ùÎì§
  comparisons: {
    sameCoffee: TastingRecord[],
    sameRoaster: TastingRecord[],
    sameOrigin: TastingRecord[],
    sameProcess: TastingRecord[]
  },
  
  // Í∞úÏù∏ Ìä∏Î†åÎìú
  personalTrends: {
    favoriteOrigins: string[],
    flavorPreferences: FlavorTrend[],
    sensoryPreferences: SensoryProfile
  }
}
```

### Language Personalization (Ïñ∏Ïñ¥ Í∞úÏù∏Ìôî)
```typescript
const PERSONALIZED_COPY = {
  // Í∏∞Ï°¥
  popular: "Ïù∏Í∏∞ ÏûàÎäî Ìñ•ÎØ∏",
  recommended: "Ï∂îÏ≤ú Ìñ•ÎØ∏",
  average: "ÌèâÍ∑† Ï†êÏàò",
  
  // Í∞úÏÑ†
  popular: "ÎÇ¥Í∞Ä ÏûêÏ£º Ï∞æÏùÄ Ìñ•ÎØ∏",
  recommended: "Ïù¥Ï†ÑÏóê Î∞úÍ≤¨Ìïú Ìñ•ÎØ∏",
  average: "ÎÇòÏùò ÌèâÍ∑† Ï†êÏàò",
  
  // Ï∂îÍ∞Ä
  exploration: "ÏïÑÏßÅ ÏãúÎèÑÌïòÏßÄ ÏïäÏùÄ Ìñ•ÎØ∏",
  growth: "Ìñ•ÎØ∏ Ïñ¥ÌúòÍ∞Ä 3Í∞ú ÎäòÏóàÏñ¥Ïöî!"
};
```

### Achievement Integration (ÏÑ∏Î∂ÑÌôî)
```typescript
interface TastingAchievements {
  // Îã®Í≥ÑÎ≥Ñ ÏóÖÏ†Å
  stepAchievements: {
    'first-roaster-note': "Ï≤´ Î°úÏä§ÌÑ∞ ÎÖ∏Ìä∏ ÏùΩÍ∏∞",
    'flavor-explorer': "10Í∞ÄÏßÄ Îã§Î•∏ Ìñ•ÎØ∏ Î∞úÍ≤¨",
    'sensory-master': "50Ìöå Í∞êÍ∞Å ÌèâÍ∞Ä ÏôÑÎ£å"
  },
  
  // ÏÑ±Ïû• ÏóÖÏ†Å
  growthAchievements: {
    'vocabulary-expansion': "Ìñ•ÎØ∏ Ïñ¥Ìúò 20Í∞ú Îã¨ÏÑ±",
    'consistent-taster': "ÏùºÏ£ºÏùº Ïó∞ÏÜç ÌÖåÏù¥Ïä§ÌåÖ",
    'origin-explorer': "5Í∞ú Îã§Î•∏ ÏÇ∞ÏßÄ Ïª§Ìîº ÏãúÏùå"
  }
}
```

---

## ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ Íµ¨ÌòÑ Í∞ÄÏù¥Îìú

### 1. Enhanced Progress Bar
```typescript
interface EnhancedProgressBarProps {
  steps: TastingStep[];
  currentStep: number;
}

const EnhancedProgressBar = ({ steps, currentStep }: EnhancedProgressBarProps) => {
  return (
    <View style={styles.progressContainer}>
      {steps.map((step, index) => (
        <View key={step.id} style={styles.stepIndicator}>
          <View style={[
            styles.stepDot,
            step.status === StepStatus.REQUIRED && styles.requiredDot,
            step.status === StepStatus.COMPLETED && styles.completedDot,
            index === currentStep && styles.currentDot
          ]} />
          <Text style={styles.stepLabel}>{step.name}</Text>
        </View>
      ))}
    </View>
  );
};
```

### 2. Flavor Wheel Component
```typescript
const FlavorWheel = ({ onSelectFlavor }) => {
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [selectedSubcategory, setSelectedSubcategory] = useState(null);
  
  return (
    <Svg width={300} height={300}>
      {/* Center circle for selected flavors */}
      <Circle cx={150} cy={150} r={50} fill="#f0f0f0" />
      
      {/* Category rings */}
      {FLAVOR_CATEGORIES.map((category, index) => (
        <TouchableOpacity
          key={category.id}
          onPress={() => setSelectedCategory(category)}
        >
          <Path
            d={createArcPath(index, FLAVOR_CATEGORIES.length, 60, 100)}
            fill={category.color}
            opacity={selectedCategory?.id === category.id ? 1 : 0.7}
          />
          <Text>{category.name}</Text>
        </TouchableOpacity>
      ))}
    </Svg>
  );
};
```

### 3. Personal Flavor Library
```typescript
const PersonalFlavorLibrary = () => {
  const [bookmarkedFlavors, setBookmarkedFlavors] = useState([]);
  const [showAddNote, setShowAddNote] = useState(false);
  
  return (
    <View style={styles.libraryContainer}>
      <Text style={styles.sectionTitle}>ÎÇ¥ Ìñ•ÎØ∏ ÎùºÏù¥Î∏åÎü¨Î¶¨</Text>
      
      <ScrollView horizontal>
        {bookmarkedFlavors.map(flavor => (
          <TouchableOpacity
            key={flavor.id}
            style={styles.flavorCard}
            onLongPress={() => setShowAddNote(flavor)}
          >
            <Text style={styles.flavorName}>{flavor.name}</Text>
            <Text style={styles.flavorCount}>√ó{flavor.count}</Text>
            {flavor.personalNote && (
              <Text style={styles.personalNote}>{flavor.personalNote}</Text>
            )}
          </TouchableOpacity>
        ))}
      </ScrollView>
    </View>
  );
};
```

### 4. Context-Aware Hints
```typescript
const ContextualHint = ({ screen, tastingHistory }) => {
  const hint = getContextualHint(screen, tastingHistory);
  
  if (!hint) return null;
  
  return (
    <Animated.View style={[styles.hintContainer, fadeInAnimation]}>
      <Text style={styles.hintIcon}>{hint.icon}</Text>
      <Text style={styles.hintText}>{hint.text}</Text>
      {hint.dismissible && (
        <TouchableOpacity onPress={dismissHint}>
          <Text>√ó</Text>
        </TouchableOpacity>
      )}
    </Animated.View>
  );
};
```

---

## Ïõπ ÌîÑÎ°úÌÜ†ÌÉÄÏûÖ Íµ¨ÌòÑ ÏöîÏ≤≠ÏÇ¨Ìï≠

Ïõπ ClaudeÏóêÍ≤å Îã§Ïùå Í∏∞Îä•Îì§ÏùÑ Ìè¨Ìï®Ìïú Ïù∏ÌÑ∞ÎûôÌã∞Î∏å ÌîÑÎ°úÌÜ†ÌÉÄÏûÖÏùÑ ÏöîÏ≤≠ÌïòÏÑ∏Ïöî:

1. **Unified Interface**
   - Î™®Îì† ÏÇ¨Ïö©ÏûêÎ•º ÏúÑÌïú ÌÜµÏùºÎêú Ïù∏ÌÑ∞ÌéòÏù¥Ïä§
   - Ï§ëÍ∏âÏûê ÏàòÏ§ÄÏùò Í∏∞Îä• Ï†úÍ≥µ

2. **Enhanced Progress Bar**
   - ÌïÑÏàò/ÏÑ†ÌÉù Îã®Í≥Ñ ÏãúÍ∞ÅÏ†Å Íµ¨Î∂Ñ
   - ÌòÑÏû¨ ÏúÑÏπò ÌëúÏãú
   - Í±¥ÎÑàÎõ¥ Îã®Í≥Ñ ÌëúÏãú

3. **Flavor Selection Interface**
   - ÌîåÎ†àÏù¥Î≤Ñ Ìú† UI
   - 2Îã®Í≥Ñ ÏÑ†ÌÉù (Ïπ¥ÌÖåÍ≥†Î¶¨ ‚Üí ÏÑ∏Î∂Ä Ìñ•ÎØ∏)
   - ÏµúÎåÄ 5Í∞ú ÏÑ†ÌÉù

4. **Personal Flavor Library**
   - Î∂ÅÎßàÌÅ¨ Í∏∞Îä•
   - Í∞úÏù∏ ÎÖ∏Ìä∏ Ï∂îÍ∞Ä
   - ÏÇ¨Ïö© ÎπàÎèÑ ÌëúÏãú

5. **Contextual Features**
   - Í∞ôÏùÄ Ïª§Ìîº/Î°úÏä§ÌÑ∞/ÏÇ∞ÏßÄ ÎπÑÍµê
   - Í∞úÏù∏ Ìä∏Î†åÎìú ÏãúÍ∞ÅÌôî
   - ÏÑ±Ïû• ÏßÄÌëú ÌëúÏãú

Ïù¥ Î¨∏ÏÑúÎ•º Í∏∞Î∞òÏúºÎ°ú React Native ÌîÑÎ°úÌÜ†ÌÉÄÏûÖÏùÑ ÎßåÎì§Ïñ¥ Ïã§Ï†ú Ïï±Ïóê Ï†ÅÏö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.