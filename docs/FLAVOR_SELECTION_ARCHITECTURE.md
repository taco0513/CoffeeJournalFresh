# 향미 선택 UX/UI Architecture (2025-07-22)

## 개요
Coffee Journal Fresh MVP의 향미 선택 화면 아키텍처 문서입니다. 사용자가 직관적이고 효율적으로 커피의 향미를 선택할 수 있도록 설계된 3단계 계층 구조 시스템입니다.

## 핵심 설계 원칙

### 1. 3단계 계층 구조
```
Level 1 (카테고리) → Level 2 (서브카테고리) → Level 3 (개별 향미)
예: Fruity → Berry → 블랙베리
```

### 2. 시각적 계층과 정보 구조
- **카테고리 카드**: 접을 수 있는 아코디언 형태
- **색상 코딩**: 각 카테고리별 고유 색상으로 시각적 구분
- **이모지 활용**: 카테고리 특성을 직관적으로 표현
- **선택 개수 표시**: 실시간 피드백 제공

### 3. 상호작용 패턴
- **확장/축소**: 카테고리 탭으로 토글
- **서브카테고리 칩**: 수평 스크롤 가능한 칩 형태
- **다중 선택 지원**: 서브카테고리 전체 또는 개별 향미 선택 가능
- **최대 5개 제한**: 명확한 제약사항 표시

## UI 컴포넌트 구조

### 1. 네비게이션 바
```
[←] 향미 선택                    [건너뛰기]
```
- 뒤로가기, 제목, 건너뛰기 옵션 제공

### 2. 진행 상태 표시
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                33%
```
- 전체 테이스팅 플로우에서의 위치 표시

### 3. 가이드 메시지
```
🎯 커피에서 느껴지는 향과 맛을 선택해보세요
💡 각 향미는 여러 개 선택 가능합니다 (최대 5개)
```
- 명확한 사용 방법 안내

### 4. 검색 바
```
🔍 향미 검색...
```
- 실시간 검색 지원
- 한국어/영어 동시 검색 가능

### 5. 선택된 향미 표시 (Sticky Header)
```
선택한 향미 (3/5)              [모든 카테고리 열기]
[블랙베리] [견초 과일] [초콜릿]
```
- 항상 상단에 고정되어 현재 상태 표시
- 탭하여 즉시 제거 가능
- 서브카테고리 선택은 다른 스타일로 구분

### 6. 카테고리 아코디언
```
┌─────────────────────────────────────────┐
│ 🍓 과일 향/프루티              (2) 4 ▼  │
├─────────────────────────────────────────┤
│ [베리류/딸기류] [말린 과일] [기타 과일]  │ ← 서브카테고리
│                                         │
│ 블랙베리  라즈베리  블루베리  딸기      │ ← 개별 향미
└─────────────────────────────────────────┘
```

## 상호작용 플로우

### 1. 카테고리 확장/축소
- 카테고리 헤더 탭 → 서브카테고리 표시/숨김
- 부드러운 애니메이션으로 전환
- 검색 시 자동으로 모든 카테고리 확장

### 2. 향미 선택 방식
#### 방식 1: 서브카테고리 전체 선택
- 서브카테고리 칩 탭 → 해당 카테고리의 모든 향미 선택
- 파란색 배경으로 선택 상태 표시

#### 방식 2: 개별 향미 선택
- 서브카테고리 확장 → 개별 향미 버튼 탭
- 서브카테고리가 확장되면 개별 향미 그리드 표시

### 3. 선택 제거
- 상단 선택된 향미 칩 탭 → 즉시 제거
- 이미 선택된 향미 다시 탭 → 선택 해제

## 시각적 피드백

### 1. 색상 시스템
- **카테고리별 고유 색상**: 
  - Fruity: #FF6B6B
  - Sweet: #FFB6C1
  - Nutty/Cocoa: #D2691E
  - 등등...
- **선택 상태**: SystemBlue (#007AFF)
- **비활성 상태**: SystemGray4 (opacity 0.4)

### 2. 상태 표시
- **선택된 카테고리**: 우측에 선택 개수 뱃지
- **확장된 카테고리**: 배경색 변경, 화살표 회전
- **선택된 서브카테고리**: 
  - 전체 선택: 진한 파란색 배경
  - 일부 선택: 연한 파란색 배경 + 테두리

### 3. 애니메이션
- LayoutAnimation 사용으로 부드러운 전환
- 카테고리 확장/축소 시 easeInEaseOut 적용

## 기술적 구현

### 1. 상태 관리
```typescript
const [expandedCategories, setExpandedCategories] = useState<string[]>([]);
const [expandedSubCategories, setExpandedSubCategories] = useState<Set<string>>(new Set());
const selectedPaths = currentTasting.selectedFlavors || [];
```

### 2. 데이터 구조
```typescript
interface FlavorPath {
  level1: string;  // 카테고리
  level2: string;  // 서브카테고리
  level3?: string; // 개별 향미 (optional)
}
```

### 3. 성능 최적화
- ScrollView의 horizontal 속성 활용
- 조건부 렌더링으로 불필요한 DOM 업데이트 방지
- 메모이제이션 없이도 충분한 성능 확보

## 사용자 경험 특징

### 1. 직관성
- 명확한 시각적 계층 구조
- 이모지와 색상으로 카테고리 구분
- 선택 상태의 즉각적인 피드백

### 2. 효율성
- 서브카테고리 전체 선택으로 빠른 선택 가능
- 검색으로 특정 향미 빠르게 찾기
- 최대 5개 제한으로 의사결정 부담 감소

### 3. 유연성
- 서브카테고리 전체 또는 개별 향미 선택 가능
- 언제든지 선택 변경 가능
- 건너뛰기 옵션 제공

## MVP 최적화 포인트

1. **No Progressive Disclosure**: 모든 카테고리 즉시 표시
2. **No Beginner Mode**: 단일 모드로 통일
3. **Simple State Management**: Zustand 사용하여 간단하게 구현
4. **Korean First**: 한국어 중심 UI/UX
5. **Minimal Dependencies**: 추가 라이브러리 최소화

## 성공 지표

- **선택 완료율**: 85% 이상
- **평균 선택 시간**: 30초 이내
- **평균 선택 개수**: 2-3개
- **검색 사용률**: 전체 세션의 30%

---

이 아키텍처는 2025년 7월 22일 기준 MVP 빌드의 향미 선택 시스템을 문서화한 것입니다.