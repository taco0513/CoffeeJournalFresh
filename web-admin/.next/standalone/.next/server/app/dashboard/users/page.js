(()=>{var e={};e.id=242,e.ids=[242],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22121:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(45512),i=r(58009),a=r(73746),n=r(54716),d=r(39400),l=r(77722),o=r(64590),c=r(78447),x=r(47630),u=r(86235),m=r(16873),h=r(41680);let p=(0,h.A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),f=(0,h.A)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),j=(0,h.A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),v=(0,h.A)("ShieldOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5 5a1 1 0 0 0-1 1v7c0 5 3.5 7.5 7.67 8.94a1 1 0 0 0 .67.01c2.35-.82 4.48-1.97 5.9-3.71",key:"1jlk70"}],["path",{d:"M9.309 3.652A12.252 12.252 0 0 0 11.24 2.28a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1v7a9.784 9.784 0 0 1-.08 1.264",key:"18rp1v"}]]);function b(){let[e,s]=(0,i.useState)([]),[r,h]=(0,i.useState)(""),[b,y]=(0,i.useState)(!0),{toast:_}=(0,n.dj)(),w=(0,a.U)(),g=async()=>{y(!0);try{let{data:e,error:r}=await w.from("user_profiles").select("*").order("created_at",{ascending:!1});if(r)throw r;s(e||[])}catch(e){_({title:"오류",description:"사용자 목록을 불러오는데 실패했습니다.",variant:"destructive"})}finally{y(!1)}},N=async e=>{try{let{error:s}=await w.from("user_profiles").update({is_moderator:!e.is_moderator}).eq("id",e.id);if(s)throw s;_({title:"성공",description:`${e.username}의 모더레이터 권한이 ${e.is_moderator?"해제":"부여"}되었습니다.`}),g()}catch(e){_({title:"오류",description:"권한 변경에 실패했습니다.",variant:"destructive"})}},C=async e=>{try{let{error:s}=await w.from("user_profiles").update({is_verified:!e.is_verified}).eq("id",e.id);if(s)throw s;_({title:"성공",description:`${e.username}의 인증 상태가 변경되었습니다.`}),g()}catch(e){_({title:"오류",description:"인증 상태 변경에 실패했습니다.",variant:"destructive"})}},P=e.filter(e=>e.username.toLowerCase().includes(r.toLowerCase())||e.display_name?.toLowerCase().includes(r.toLowerCase())||e.id.toLowerCase().includes(r.toLowerCase()));return b?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(u.A,{className:"h-8 w-8 animate-spin"})}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"사용자 관리"}),(0,t.jsx)("div",{className:"flex items-center space-x-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(m.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)(l.p,{placeholder:"사용자 검색...",value:r,onChange:e=>h(e.target.value),className:"pl-10 w-64"})]})})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-4 mb-8",children:[(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(o.ZB,{className:"text-sm font-medium",children:"전체 사용자"}),(0,t.jsx)(p,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(o.Wu,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.length})})]}),(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(o.ZB,{className:"text-sm font-medium",children:"인증된 사용자"}),(0,t.jsx)(f,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(o.Wu,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>e.is_verified).length})})]}),(0,t.jsxs)(o.Zp,{children:[(0,t.jsxs)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(o.ZB,{className:"text-sm font-medium",children:"모더레이터"}),(0,t.jsx)(j,{className:"h-4 w-4 text-muted-foreground"})]}),(0,t.jsx)(o.Wu,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.filter(e=>e.is_moderator).length})})]}),(0,t.jsxs)(o.Zp,{children:[(0,t.jsx)(o.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,t.jsx)(o.ZB,{className:"text-sm font-medium",children:"평균 레벨"})}),(0,t.jsx)(o.Wu,{children:(0,t.jsx)("div",{className:"text-2xl font-bold",children:e.length>0?(e.reduce((e,s)=>e+s.level,0)/e.length).toFixed(1):"0"})})]})]}),(0,t.jsxs)(o.Zp,{children:[(0,t.jsx)(o.aR,{children:(0,t.jsxs)(o.ZB,{children:["사용자 목록 (",P.length,"명)"]})}),(0,t.jsx)(o.Wu,{children:(0,t.jsxs)(x.XI,{children:[(0,t.jsx)(x.A0,{children:(0,t.jsxs)(x.Hj,{children:[(0,t.jsx)(x.nd,{children:"사용자명"}),(0,t.jsx)(x.nd,{children:"레벨"}),(0,t.jsx)(x.nd,{children:"테이스팅"}),(0,t.jsx)(x.nd,{children:"상태"}),(0,t.jsx)(x.nd,{children:"가입일"}),(0,t.jsx)(x.nd,{className:"text-right",children:"액션"})]})}),(0,t.jsx)(x.BF,{children:P.map(e=>(0,t.jsxs)(x.Hj,{children:[(0,t.jsx)(x.nA,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.username}),e.display_name&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:e.display_name})]})}),(0,t.jsx)(x.nA,{children:(0,t.jsxs)(c.E,{variant:"outline",children:["Lv.",e.level]})}),(0,t.jsx)(x.nA,{children:e.total_tastings}),(0,t.jsx)(x.nA,{children:(0,t.jsxs)("div",{className:"flex gap-1",children:[e.is_verified&&(0,t.jsx)(c.E,{variant:"default",children:"인증됨"}),e.is_moderator&&(0,t.jsx)(c.E,{variant:"secondary",children:"모더레이터"})]})}),(0,t.jsx)(x.nA,{children:new Date(e.created_at).toLocaleDateString("ko-KR")}),(0,t.jsx)(x.nA,{className:"text-right",children:(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>C(e),children:e.is_verified?(0,t.jsx)(v,{className:"h-4 w-4"}):(0,t.jsx)(f,{className:"h-4 w-4"})}),(0,t.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>N(e),children:e.is_moderator?(0,t.jsx)(v,{className:"h-4 w-4"}):(0,t.jsx)(j,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})]})}},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36402:(e,s,r)=>{Promise.resolve().then(r.bind(r,22121))},54165:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/zimo_mbp16_m1max/Projects/CoffeeJournalFresh-20250720-oauth-admin/web-admin/src/app/dashboard/users/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/zimo_mbp16_m1max/Projects/CoffeeJournalFresh-20250720-oauth-admin/web-admin/src/app/dashboard/users/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73354:(e,s,r)=>{Promise.resolve().then(r.bind(r,54165))},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},85236:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>o});var t=r(70260),i=r(28203),a=r(25155),n=r.n(a),d=r(67292),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(s,l);let o={children:["",{children:["dashboard",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,54165)),"/Users/zimo_mbp16_m1max/Projects/CoffeeJournalFresh-20250720-oauth-admin/web-admin/src/app/dashboard/users/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,53062)),"/Users/zimo_mbp16_m1max/Projects/CoffeeJournalFresh-20250720-oauth-admin/web-admin/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/Users/zimo_mbp16_m1max/Projects/CoffeeJournalFresh-20250720-oauth-admin/web-admin/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/zimo_mbp16_m1max/Projects/CoffeeJournalFresh-20250720-oauth-admin/web-admin/src/app/dashboard/users/page.tsx"],x={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/dashboard/users/page",pathname:"/dashboard/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[638,853,737,727,658,454,970,765],()=>r(85236));module.exports=t})();